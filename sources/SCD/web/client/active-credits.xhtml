<ui:composition template="../templates/employee/client.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich" xmlns:h="http://java.sun.com/jsf/html">
    <ui:define name="content">


        <a4j:status id="loading"
                    onstart="#{rich:component('panel_loading')}.show()"
                    onstop="#{rich:component('panel_loading')}.hide()"
                />

        <h:form id="form">
            <rich:popupPanel id="panel_loading" autosized="true">
                <h:graphicImage library="images" name="loader.gif" alt=""/>
                <h:outputText value="#{bundle['common.loading']}"/>
            </rich:popupPanel>

            <rich:dataTable
                    value="#{activeCreditsGridBusinessBean.activeCreditItems}"
                    var="item"
                    iterationStatusVar="iter"
                    id="table"
                    rows="#{activeCreditsGridBusinessBean.rowsPerPage}"
                    styleClass="grid">
                <rich:column styleClass="grid-number-col">
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.common.number']}"/>
                    </f:facet>
                    <h:outputText value="#{iter.index+1}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.date']}"/>
                    </f:facet>
                    <h:outputText value="#{item.issuanceDate}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.credit']}"/>
                    </f:facet>
                    <h:outputText value="#{item.credit.name}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.accountNo']}"/>
                    </f:facet>
                    <h:outputText value="#{item.account['accountNumber']}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.sum']}"/>
                    </f:facet>
                    <h:outputText value="#{item.amount}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.term']}"/>
                    </f:facet>
                    <h:outputText value="#{item.term}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.sumToPay']}"/>
                    </f:facet>
                    <h:outputText value="#{item.calculatedAmount}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.client.credits.sumPayed']}"/>
                    </f:facet>
                    <h:outputText value="#{item.paidAmount}"/>
                </rich:column>

                <rich:column>
                    <f:facet name="header">
                        <h:outputText value="#{bundle['grid.common.report']}"/>
                    </f:facet>

                    <a4j:commandLink value="#{bundle['grid.common.generateReport']}"
                                     styleClass="grid-report-col"
                                     immediate="true"
                                     action="#{activeCreditsGridBusinessBean.generateReport}"
                            />

                    <!--
                                            <a4j:param value="#{item.creditItemId}"
                                                       assignTo="#{activeCreditsGridBusinessBean.selectedRowId}"/>
                                        </a4j:commandLink>
                    -->
                </rich:column>

                <!--
                                <rich:column>
                                    <a4j:commandLink styleClass="no-decor" execute="@this"

                                                     render="@none" oncomplete="#{rich:component('confirmPane')}.show()">
                                        <h:graphicImage value="/images/icons/delete.gif" alt="delete"/>
                                        <a4j:param value="#{it.index}"
                                                   assignTo="#{carsBean.currentCarIndex}"/>
                                    </a4j:commandLink>
                                    <a4j:commandLink styleClass="no-decor" render="editGrid"
                                                     execute="@this" oncomplete="#{rich:component('editPane')}.show()">
                                        <h:graphicImage value="/images/icons/edit.gif" alt="edit"/>
                                        <a4j:param value="#{it.index}"
                                                   assignTo="#{carsBean.currentCarIndex}"/>
                                        <f:setPropertyActionListener target="#{carsBean.editedCar}"
                                                                     value="#{car}"/>
                                    </a4j:commandLink>
                                </rich:column>
                -->

                <f:facet name="footer">
                    <rich:dataScroller page="#{activeCreditsGridBusinessBean.currentPage}"/>
                </f:facet>
            </rich:dataTable>


        </h:form>


    </ui:define>
</ui:composition>

        <!--
        <h:commandLink value="#{bundle['grid.common.generateReport']}"
                       styleClass="grid-report-col"
                       action="#{activeCreditsGridBusinessBean.generateReport}"
                >
        </h:commandLink>
        -->
