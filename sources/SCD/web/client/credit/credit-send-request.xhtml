<ui:composition template="../../templates/employee/client.xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:grid="http://java.sun.com/jsf/composite/components">

    <ui:define name="script">
        <h:outputScript library="js/login" name="registration.js"/>
    </ui:define>

    <ui:define name="content">

        Credit:
        <h:outputText value="#{creditRequestController.credit.name}" escape="false"/>

        <h:form id="credit-request-form">

            <h:panelGrid columns="3">

                <h:panelGroup>
                    <h:outputLabel value="#{bundle['client.credit.details.monthlyCacheIncome']}"/>
                </h:panelGroup>
                <h:panelGroup>
                    <h:inputText id="monthlyCacheIncome" size="20"
                                 value="#{creditRequestController.monthlyCacheIncome}"
                                 styleClass="numeric"
                                 required="true"
                                 requiredMessage="#{bundle['registration.validator.required']}">
                        <a4j:ajax event="keyup" render="maxSum term sum send-btn"/>
                    </h:inputText>
                </h:panelGroup>
                <h:panelGroup>
                    <h:message styleClass="errorMsg" for="monthlyCacheIncome"/>
                </h:panelGroup>


                <h:panelGroup>
                    <h:outputLabel value="#{bundle['client.credit.details.term']}"/>
                </h:panelGroup>
                <h:panelGroup>
                    <h:inputText id="term" size="20"
                                 value="#{creditRequestController.term}"
                                 styleClass="numeric"
                                 style=" #{(creditRequestController.term > creditRequestController.credit.maxTerm) ? 'color: red' : ''}"
                                 required="true"
                                 requiredMessage="#{bundle['registration.validator.required']}">
                        <a4j:ajax event="keyup" render="maxSum term sum send-btn"/>
                    </h:inputText>
                    <h:outputText value="#{bundle['client.credit.details.by']}"/>
                    (
                    <h:outputText value="#{bundle['client.credit.details.maxTerm']}"/>
                    <h:outputText value="#{creditRequestController.credit.maxTerm}"/>
                    <h:outputText value="#{bundle['client.credit.details.months']}"/>
                    )
                </h:panelGroup>
                <h:panelGroup>
                    <h:message styleClass="errorMsg" for="term"/>
                </h:panelGroup>


                <h:panelGroup>
                    <h:outputLabel value="#{bundle['client.credit.details.sum']}"/>
                </h:panelGroup>
                <h:panelGroup>
                    <h:inputText id="sum" size="20"
                                 value="#{creditRequestController.sum}"
                                 styleClass="numeric"
                                 style="#{(creditRequestController.sum > creditRequestController.maxSum) ? 'color: red' : ''}"
                                 required="true"
                                 requiredMessage="#{bundle['registration.validator.required']}">
                        <a4j:ajax event="keyup" render="maxSum term sum send-btn"/>
                    </h:inputText>
                    <h:outputText value="#{bundle['client.credit.details.by']}"/>
                    (
                    <h:outputText value="#{bundle['client.credit.details.maxAvailableSum']}"/>
                    <h:outputText value="#{creditRequestController.maxSum}" id="maxSum"/>
                    )

                </h:panelGroup>
                <h:panelGroup>
                    <h:message styleClass="errorMsg" for="sum"/>
                </h:panelGroup>

            </h:panelGrid>

            <br/>
            <h:commandButton id="send-btn"
                             value="#{bundle['client.credit.details.sendRequest']}"
                             action="#" immediate="true"
                             disabled="#{((creditRequestController.sum > creditRequestController.maxSum) ||
                             (creditRequestController.term > creditRequestController.credit.maxTerm)) ? true: false}"
                    />
            <br/>
            <h:commandLink value="#{bundle['client.credit.details.backToDetails']}"
                           action="credit-details" immediate="true"/>

        </h:form>

    </ui:define>

</ui:composition>