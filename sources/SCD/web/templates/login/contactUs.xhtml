<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<body>
<rich:popupPanel header="Contact us" id="contactUsPane" domElementAttachment="parent" autosized="true">
    <h:panelGrid columns="1" id="editGrid">
        <br/><h:outputText value="#{bundle['registration.email']}"/><br/>
        <h:inputText value="#{contactUsController.email}"
                     id="contactEmail"/>

        <br/><h:outputText value="#{bundle['registration.name']}"/><br/>
        <h:inputText value="#{contactUsController.name}"
                     id="contactName"/>
        <br/>
        <h:outputText value="Message"/><br/>
        <h:inputTextarea cols="59" rows="15" value="#{contactUsController.message}"
                         id="contactMsg"/>
    </h:panelGrid>
    <br/>
    <center>
        <a4j:commandButton value="Send"
                           onclick="#{rich:component('panel_loading')}.show();
                                    jQuery('[id $= contactEmailSubmit]').val(jQuery('[id $= contactEmail]').val());
                                    jQuery('[id $= contactNameSubmit]').val(jQuery('[id $= contactName]').val());
                                    jQuery('[id $= contactMsgSubmit]').val(jQuery('[id $= contactMsg]').val());
                                    jQuery('[id $= contactSendBtn]').click();
                                    "
                />

        <a4j:commandButton value="Cancel"
                           onclick="#{rich:component('contactUsPane')}.hide(); return false;"/>
    </center>

</rich:popupPanel>

<h:form>
    <div class="invisible">
        <a4j:commandButton id="contactSendBtn"
                           action="#{contactUsController.contuctUsSendAction}"
                           oncomplete="#{rich:component('panel_loading')}.hide();
                                       #{rich:component('contactUsPane')}.hide();
                           "
                />

        <h:inputText value="#{contactUsController.email}"
                     id="contactEmailSubmit"/>
        <h:inputText value="#{contactUsController.name}"
                     id="contactNameSubmit"/>
        <h:inputText value="#{contactUsController.message}"
                     id="contactMsgSubmit"/>
    </div>
</h:form>

</body>
</HTML>